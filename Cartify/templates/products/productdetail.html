{% extends "base.html" %}

{% block title  %}{{product.name}}{% endblock title  %}
{% load static %}
{% block extra_head  %}
<link rel="stylesheet" href="{% static "products/productdetail.css" %}">
{% endblock extra_head  %}

{% block body  %}
<div class="detail-page">
    <div class="container">
        <div class="product-detail">
            <div class="img">
                <img src="{{product.image.url}}" alt="{{product.name}}">
            </div>
            <div class="details">
                <h2>{{product.name}}</h2>
                <p class='price'>${{product.price}}</p>
                {% if product.stock <= 0 %}
                <p class='out-stock'>Out of Stock</p>
                {% elif product.stock > 0 %}
                <p class='in-stock'>In Stock</p>
                {% endif %}
                <p class='seller'>Seller: <span>{{product.seller.username}}</span></p>
            </div>
            <div class='description'>
                <h2>Description</h2>
                <p>{{product.description}}</p>
            </div>
            <div>
                <button class='btn'>Add to Cart</button>
            </div>
        </div>
        <div class="sidebar">
            <aside class="related-products">
                <h3>Related Products</h3>
                <div class="related-list">
                    {% if related_products and related_products.exists %}
                        {% for p in related_products %}
                        <a href="{% url 'productDetail' p.id %}" class="related-item">
                            <div class="thumb">
                                <img src="{{ p.image.url }}" alt="{{ p.name }}">
                            </div>
                            <div class="meta">
                                <p class="title">{{ p.name }}</p>
                                <p class="price">${{ p.price }}</p>
                            </div>
                        </a>
                        {% endfor %}
                    {% else %}
                        <p class="no-related">No related products found.</p>
                    {% endif %}
                </div>
            </aside>
        </div>
    </div>
</div>
{% endblock body  %}